import numpy as np
import pandas as pd
import csv
import re

# 对小类型的分析
data = pd.read_csv('../ks-projects-201801.csv', usecols=[2, 5])

times = {}

for item in np.arange(0, len(data)):
    type_time = data.loc[item].values
    types = type_time[0]
    years = type_time[1]
    try:
        year1 = re.findall(r'(\d+)', years)
        year = year1[0]
        if types == "Periodicals":
            if year in times.keys():
                times[year] += 1
            else:
                times[year] = 1
    except TypeError:
        pass

print(times)


'''
Publish:
    
    Poetry:{'2015': 245, '2013': 209, '2014': 239, '2012': 202, '2017': 135, '2016': 176, '2010': 42, '2011': 108, '2018': 10, '2009': 3}
    Nonfiction:{'2013': 1401, '2018': 56, '2011': 434, '2015': 1369, '2012': 1388, '2017': 848, '2014': 1559, '2016': 1067, '2009': 20, '2010': 176}
    Art Books:{'2015': 434, '2012': 383, '2013': 427, '2011': 169, '2014': 361, '2017': 429, '2016': 413, '2018': 19, '2009': 11, '2010': 30}
    Fiction:{'2016': 1061, '2015': 1595, '2014': 1711, '2017': 871, '2011': 513, '2012': 1517, '2013': 1655, '2010': 172, '2018': 55, '2009': 19}
    Radio & Podcasts:{'2016': 137, '2013': 145, '2014': 236, '2015': 163, '2017': 115, '2018': 7, '2011': 36, '2012': 68, '2010': 14, '2009': 2}
    Children's Books:{'2013': 971, '2014': 1222, '2017': 1050, '2016': 974, '2015': 1259, '2011': 253, '2012': 897, '2018': 53, '2010': 65, '2009': 12}
    Periodicals：{'2011': 131, '2012': 291, '2015': 152, '2013': 236, '2014': 203, '2016': 100, '2017': 111, '2010': 28, '2009': 6, '2018': 7}


'''
